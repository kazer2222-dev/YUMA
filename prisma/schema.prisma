// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native"]
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(cuid())
  email         String   @unique
  name          String?
  avatar        String?
  password      String?  // Hashed password for email registration
  emailVerified Boolean  @default(false)
  googleId      String?  @unique // Google OAuth ID
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  // Authentication
  sessions Session[]
  pinCodes PinCode[]

  // Space memberships
  spaceMemberships SpaceMember[]

  // Task assignments
  assignedTasks              Task[]
  templateDefaultAssignments Template[] @relation("TemplateDefaultAssignee")

  // Comments and activity
  comments   Comment[]
  activities Activity[]

  // Events
  eventParticipants EventParticipant[]
  createdEvents     Event[]            @relation("EventCreator")

  // Documents
  createdDocuments     Document[]            @relation("DocumentCreator")
  documentAccess       DocumentAccess[]
  documentComments     DocumentComment[]
  documentActivities   DocumentActivity[]
  documentShareLinks   DocumentShareLink[]

  // Admin
  adminRole AdminRole?

  @@map("users")
}

model Session {
  id           String   @id @default(cuid())
  userId       String
  token        String   @unique
  refreshToken String?  @unique
  deviceInfo   String?
  ipAddress    String?
  userAgent    String?
  expiresAt    DateTime
  createdAt    DateTime @default(now())
  lastActiveAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("sessions")
}

model PinCode {
  id         String    @id @default(cuid())
  userId     String?
  email      String
  code       String
  hashedCode String
  attempts   Int       @default(0)
  resends    Int       @default(0)
  expiresAt  DateTime
  createdAt  DateTime  @default(now())
  usedAt     DateTime?

  user User? @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("pin_codes")
}

model Space {
  id          String   @id @default(cuid())
  name        String
  description String?
  slug        String   @unique
  ticker      String   @unique @default("SPACE")
  timezone    String   @default("UTC")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Members
  members SpaceMember[]

  // Tasks
  tasks Task[]

  // Custom fields
  customFields CustomField[]

  // Events
  events Event[]

  // Integrations
  integrations Integration[]

  // Settings
  settings SpaceSettings?

  // Boards
  boards Board[]

  // Statuses
  statuses Status[]

  // Templates
  templates Template[]
  Workflow  Workflow[]

  // Documents
  documents Document[]

  @@map("spaces")
}

model Board {
  id          String   @id @default(cuid())
  spaceId     String
  name        String
  description String?
  type        String   @default("KANBAN") // KANBAN, SCRUM
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  space              Space                   @relation(fields: [spaceId], references: [id], onDelete: Cascade)
  sprints            Sprint[]
  releases           Release[]
  statusVisibilities BoardStatusVisibility[]

  @@map("boards")
}

model SpaceMember {
  id       String   @id @default(cuid())
  spaceId  String
  userId   String
  role     String   @default("MEMBER") // OWNER, ADMIN, MEMBER, VIEWER
  joinedAt DateTime @default(now())

  space Space @relation(fields: [spaceId], references: [id], onDelete: Cascade)
  user  User  @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([spaceId, userId])
  @@map("space_members")
}

model Status {
  id          String   @id @default(cuid())
  spaceId     String
  name        String
  key         String
  color       String?
  description String?
  order       Int
  isStart     Boolean  @default(false)
  isDone      Boolean  @default(false)
  wipLimit    Int?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  space             Space                   @relation(fields: [spaceId], references: [id], onDelete: Cascade)
  tasks             Task[]
  boardVisibilities BoardStatusVisibility[]
  workflowStatuses  WorkflowStatus[]        @relation("StatusWorkflowStatuses")

  @@unique([spaceId, key])
  @@map("statuses")
}

model BoardStatusVisibility {
  id        String   @id @default(cuid())
  boardId   String
  statusId  String
  visible   Boolean  @default(true)
  order     Int?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  board  Board  @relation(fields: [boardId], references: [id], onDelete: Cascade)
  status Status @relation(fields: [statusId], references: [id], onDelete: Cascade)

  @@unique([boardId, statusId])
  @@map("board_status_visibilities")
}

model Task {
  id               String    @id @default(cuid())
  spaceId          String
  number           Int       @default(0)
  summary          String
  description      String?
  priority         String    @default("NORMAL") // HIGHEST, HIGH, NORMAL, LOW, LOWEST
  tags             String // JSON string for SQLite
  startDate        DateTime?
  dueDate          DateTime?
  estimate         String?
  storyPoints      Int? // Story points for Scrum/Agile estimation
  backlogOrder     Int? // Order in backlog (for prioritization)
  assigneeId       String?
  statusId         String
  sprintId         String?
  releaseVersion   String? // Release version the task belongs to
  parentId         String?
  workflowId       String?
  workflowStatusId String?
  workflowVersion  Int?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  // Relationships
  space          Space           @relation(fields: [spaceId], references: [id], onDelete: Cascade)
  assignee       User?           @relation(fields: [assigneeId], references: [id], onDelete: SetNull)
  status         Status          @relation(fields: [statusId], references: [id])
  sprint         Sprint?         @relation(fields: [sprintId], references: [id])
  parent         Task?           @relation("TaskHierarchy", fields: [parentId], references: [id])
  subtasks       Task[]          @relation("TaskHierarchy")
  workflow       Workflow?       @relation(fields: [workflowId], references: [id], onDelete: SetNull)
  workflowStatus WorkflowStatus? @relation("WorkflowStatusTasks", fields: [workflowStatusId], references: [id], onDelete: SetNull)

  // Dependencies
  dependencies TaskDependency[] @relation("TaskDependsOn")
  dependents   TaskDependency[] @relation("TaskDependent")

  // Attachments
  attachments Attachment[]

  // Comments
  comments Comment[]

  // Activities
  activities Activity[]

  // Custom field values
  customFieldValues CustomFieldValue[]

  // Events
  events Event[]

  // Documents
  linkedDocuments DocumentLink[]

  @@unique([spaceId, number])
  @@map("tasks")
}

model Sprint {
  id        String    @id @default(cuid())
  boardId   String
  name      String
  goal      String?
  startDate DateTime?
  endDate   DateTime?
  state     String    @default("PLANNED") // PLANNED, ACTIVE, COMPLETED, CLOSED
  order     Int       @default(0)
  velocity  Int? // Calculated velocity from completed sprints
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  board    Board           @relation(fields: [boardId], references: [id], onDelete: Cascade)
  tasks    Task[]
  releases ReleaseSprint[]

  @@map("sprints")
}

model TaskDependency {
  id          String   @id @default(cuid())
  taskId      String
  dependsOnId String
  createdAt   DateTime @default(now())

  task      Task @relation("TaskDependsOn", fields: [taskId], references: [id], onDelete: Cascade)
  dependsOn Task @relation("TaskDependent", fields: [dependsOnId], references: [id], onDelete: Cascade)

  @@unique([taskId, dependsOnId])
  @@map("task_dependencies")
}

model Attachment {
  id        String   @id @default(cuid())
  taskId    String
  filename  String
  mimeType  String
  size      Int
  url       String
  createdAt DateTime @default(now())

  task Task @relation(fields: [taskId], references: [id], onDelete: Cascade)

  @@map("attachments")
}

model Comment {
  id        String   @id @default(cuid())
  taskId    String
  userId    String
  content   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  task Task @relation(fields: [taskId], references: [id], onDelete: Cascade)
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("comments")
}

model Activity {
  id        String   @id @default(cuid())
  taskId    String?
  userId    String
  type      String // CREATED, UPDATED, STATUS_CHANGED, etc.
  data      String // JSON string for SQLite
  createdAt DateTime @default(now())

  task Task? @relation(fields: [taskId], references: [id], onDelete: Cascade)
  user User  @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("activities")
}

model CustomField {
  id        String   @id @default(cuid())
  spaceId   String
  name      String
  key       String
  type      String // STRING, TEXT, NUMBER, DATE, etc.
  options   String? // JSON string for SQLite
  required  Boolean  @default(false)
  order     Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  space  Space              @relation(fields: [spaceId], references: [id], onDelete: Cascade)
  values CustomFieldValue[]

  @@unique([spaceId, key])
  @@map("custom_fields")
}

model CustomFieldValue {
  id            String   @id @default(cuid())
  taskId        String
  customFieldId String
  value         String // JSON string for SQLite
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  task        Task        @relation(fields: [taskId], references: [id], onDelete: Cascade)
  customField CustomField @relation(fields: [customFieldId], references: [id], onDelete: Cascade)

  @@unique([taskId, customFieldId])
  @@map("custom_field_values")
}

model Event {
  id             String   @id @default(cuid())
  spaceId        String?
  taskId         String?
  title          String
  description    String?
  startDate      DateTime
  endDate        DateTime
  location       String?
  invitationLink String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  space        Space?             @relation(fields: [spaceId], references: [id], onDelete: Cascade)
  task         Task?              @relation(fields: [taskId], references: [id], onDelete: Cascade)
  creator      User               @relation("EventCreator", fields: [creatorId], references: [id])
  creatorId    String
  participants EventParticipant[]

  @@map("events")
}

model EventParticipant {
  id       String   @id @default(cuid())
  eventId  String
  userId   String
  rsvp     String   @default("PENDING") // PENDING, ACCEPTED, DECLINED, MAYBE
  joinedAt DateTime @default(now())

  event Event @relation(fields: [eventId], references: [id], onDelete: Cascade)
  user  User  @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([eventId, userId])
  @@map("event_participants")
}

model Integration {
  id        String    @id @default(cuid())
  spaceId   String?
  type      String // SLACK, TEAMS, DISCORD, etc.
  name      String
  config    String // JSON string for SQLite
  status    String    @default("DISCONNECTED") // CONNECTED, ERROR, DISCONNECTED
  lastSync  DateTime?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  space Space? @relation(fields: [spaceId], references: [id], onDelete: Cascade)

  @@map("integrations")
}

model SpaceSettings {
  id                   String   @id @default(cuid())
  spaceId              String   @unique
  maxMembers           Int?
  storageLimit         Int?
  allowCustomFields    Boolean  @default(true)
  allowIntegrations    Boolean  @default(true)
  defaultTaskTemplate  String? // JSON string for SQLite
  aiAutomationsEnabled Boolean  @default(true)
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt

  space Space @relation(fields: [spaceId], references: [id], onDelete: Cascade)

  @@map("space_settings")
}

model AdminRole {
  id        String   @id @default(cuid())
  userId    String   @unique
  role      String   @default("ADMIN") // ADMIN, VIEWER
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("admin_roles")
}

model AuditLog {
  id         String   @id @default(cuid())
  actorId    String?
  action     String
  targetType String?
  targetId   String?
  metadata   String? // JSON string for SQLite
  ipAddress  String?
  userAgent  String?
  createdAt  DateTime @default(now())

  @@map("audit_logs")
}

model Release {
  id          String    @id @default(cuid())
  boardId     String
  name        String
  version     String
  releaseDate DateTime?
  description String?
  status      String    @default("PENDING") // PENDING, RELEASED
  metrics     String? // JSON string for SQLite (totalTasks, totalStoryPoints, bugsFixed, newFeatures)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  board   Board           @relation(fields: [boardId], references: [id], onDelete: Cascade)
  sprints ReleaseSprint[]

  @@map("releases")
}

model ReleaseSprint {
  id        String   @id @default(cuid())
  releaseId String
  sprintId  String
  createdAt DateTime @default(now())

  release Release @relation(fields: [releaseId], references: [id], onDelete: Cascade)
  sprint  Sprint  @relation(fields: [sprintId], references: [id], onDelete: Cascade)

  @@unique([releaseId, sprintId])
  @@map("release_sprints")
}

model Template {
  id                String   @id @default(cuid())
  spaceId           String
  title             String
  fieldConfig       String // JSON string for SQLite - array of field configurations
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  createdBy         String
  updatedBy         String
  workflowId        String?
  defaultAssigneeId String?
  permissions       String? // JSON string for workflow permissions
  aiOptimized       Boolean  @default(false)

  space           Space     @relation(fields: [spaceId], references: [id], onDelete: Cascade)
  workflow        Workflow? @relation(fields: [workflowId], references: [id], onDelete: SetNull)
  defaultAssignee User?     @relation("TemplateDefaultAssignee", fields: [defaultAssigneeId], references: [id], onDelete: SetNull)

  @@unique([spaceId, title], name: "spaceId_title")
  @@map("templates")
}

model Workflow {
  id          String   @id @default(cuid())
  spaceId     String
  name        String
  description String?
  isDefault   Boolean  @default(false)
  aiOptimized Boolean  @default(false)
  version     Int      @default(1)
  createdBy   String?
  updatedBy   String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  space        Space                @relation(fields: [spaceId], references: [id], onDelete: Cascade)
  statuses     WorkflowStatus[]
  transitions  WorkflowTransition[]
  templates    Template[]
  tasks        Task[]
  auditEntries WorkflowAudit[]

  @@map("workflows")
}

model WorkflowStatus {
  id              String   @id @default(cuid())
  workflowId      String
  version         Int
  key             String
  name            String
  category        String // TODO, IN_PROGRESS, DONE
  color           String?
  isInitial       Boolean  @default(false)
  isFinal         Boolean  @default(false)
  order           Int      @default(0)
  visibilityRules String? // JSON string
  fieldLockRules  String? // JSON string
  statusRefId     String? // Optional linkage to global Status
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  workflow        Workflow             @relation(fields: [workflowId], references: [id], onDelete: Cascade)
  statusRef       Status?              @relation("StatusWorkflowStatuses", fields: [statusRefId], references: [id], onDelete: SetNull)
  transitionsFrom WorkflowTransition[] @relation("WorkflowTransitionFrom")
  transitionsTo   WorkflowTransition[] @relation("WorkflowTransitionTo")
  tasks           Task[]               @relation("WorkflowStatusTasks")

  @@unique([workflowId, version, key])
  @@index([workflowId, version])
  @@map("workflow_statuses")
}

model WorkflowTransition {
  id            String   @id @default(cuid())
  workflowId    String
  version       Int
  key           String?
  name          String
  fromStatusId  String
  toStatusId    String
  conditions    String? // JSON string describing conditions
  validators    String? // JSON string describing validators
  postFunctions String? // JSON string describing post-functions
  uiTrigger     String? // BUTTON, MENU, AI
  order         Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  workflow   Workflow       @relation(fields: [workflowId], references: [id], onDelete: Cascade)
  fromStatus WorkflowStatus @relation("WorkflowTransitionFrom", fields: [fromStatusId], references: [id], onDelete: Cascade)
  toStatus   WorkflowStatus @relation("WorkflowTransitionTo", fields: [toStatusId], references: [id], onDelete: Cascade)

  @@index([workflowId, version])
  @@map("workflow_transitions")
}

model WorkflowAudit {
  id         String   @id @default(cuid())
  workflowId String
  version    Int
  action     String // CREATED, UPDATED, ROLLED_BACK, ASSIGNED, etc.
  actorId    String?
  metadata   String? // JSON string with additional context
  createdAt  DateTime @default(now())

  workflow Workflow @relation(fields: [workflowId], references: [id], onDelete: Cascade)

  @@index([workflowId, version])
  @@map("workflow_audit")
}

// Document Management Models

model Document {
  id          String   @id @default(cuid())
  spaceId     String
  parentId    String?  // Parent document ID for tree hierarchy
  title       String
  description String?
  summary     String? // Brief summary of the document
  icon        String?  // Custom icon/emoji for the page
  coverImage  String?  // Cover image URL
  type        String   @default("RICH_TEXT") // RICH_TEXT, PDF, DOCX, XLSX, PPTX, TXT, IMAGE, ARCHIVE
  pageStatus  String   @default("DRAFT") // DRAFT, IN_REVIEW, APPROVED, ARCHIVED - Confluence-style page status
  status      String   @default("DRAFT") // DRAFT, PUBLISHED, ARCHIVED
  content     String? // For rich text documents (HTML/Markdown)
  fileUrl     String? // For uploaded files (PDF, DOCX, etc.)
  fileSize    Int? // File size in bytes
  mimeType    String?
  tags        String // JSON string for SQLite
  labels      String?  // JSON string for colored labels/badges (Confluence-style)
  metadata    String? // JSON string for extracted metadata
  structure   String? // JSON string for TOC/outline
  authorId    String
  projectId   String? // Optional project reference
  position    Int      @default(0) // Position within same parent level
  order       Int      @default(0) // For manual ordering (deprecated, use position)
  isPinned    Boolean  @default(false)
  isExpanded  Boolean  @default(true) // Default expanded state for tree
  hasUnpublishedChanges Boolean @default(false) // Draft indicator
  lastEditedBy String? // Last user who edited
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  deletedAt   DateTime? // Soft delete

  // Hierarchical relationships
  parent          Document?            @relation("DocumentHierarchy", fields: [parentId], references: [id], onDelete: SetNull)
  children        Document[]           @relation("DocumentHierarchy")
  
  // Other relationships
  space           Space                @relation(fields: [spaceId], references: [id], onDelete: Cascade)
  author          User                 @relation("DocumentCreator", fields: [authorId], references: [id], onDelete: Cascade)
  versions        DocumentVersion[]
  access          DocumentAccess[]
  comments        DocumentComment[]
  activities      DocumentActivity[]
  shareLinks      DocumentShareLink[]
  linkedTasks     DocumentLink[]
  vectors         DocumentVector[]
  redactions      DocumentRedaction[]

  @@index([spaceId])
  @@index([parentId])
  @@index([authorId])
  @@index([status])
  @@index([type])
  @@index([position])
  @@index([createdAt])
  @@map("documents")
}

model DocumentVersion {
  id          String   @id @default(cuid())
  documentId  String
  version     Int
  content     String? // For rich text
  fileUrl     String? // For file-based documents
  fileSize    Int?
  changeNote  String? // User-provided change note
  changeSummary String? // AI-generated change summary
  label       String? // Version label (e.g., "draft", "approved")
  createdBy   String
  createdAt   DateTime @default(now())

  document Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  @@unique([documentId, version])
  @@index([documentId])
  @@map("document_versions")
}

model DocumentAccess {
  id         String   @id @default(cuid())
  documentId String
  userId     String?
  role       String   @default("VIEW") // OWNER, ADMIN, EDIT, COMMENT, VIEW, RESTRICTED
  grantedBy  String
  expiresAt  DateTime?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  document Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  user     User?    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([documentId, userId])
  @@index([documentId])
  @@index([userId])
  @@map("document_access")
}

model DocumentComment {
  id          String   @id @default(cuid())
  documentId  String
  userId      String
  content     String
  parentId    String? // For threaded comments
  resolved    Boolean  @default(false)
  resolvedBy  String?
  resolvedAt  DateTime?
  position    String? // JSON string for inline comment position
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  document Document           @relation(fields: [documentId], references: [id], onDelete: Cascade)
  user     User               @relation(fields: [userId], references: [id], onDelete: Cascade)
  parent   DocumentComment?   @relation("CommentThread", fields: [parentId], references: [id], onDelete: Cascade)
  replies  DocumentComment[]  @relation("CommentThread")

  @@index([documentId])
  @@index([userId])
  @@index([parentId])
  @@map("document_comments")
}

model DocumentActivity {
  id         String   @id @default(cuid())
  documentId String
  userId     String
  type       String // CREATED, UPDATED, VIEWED, SHARED, COMMENTED, VERSION_CREATED, ACCESS_CHANGED, etc.
  data       String? // JSON string for SQLite
  createdAt  DateTime @default(now())

  document Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  user     User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([documentId])
  @@index([userId])
  @@index([type])
  @@index([createdAt])
  @@map("document_activities")
}

model DocumentShareLink {
  id          String   @id @default(cuid())
  documentId  String
  token       String   @unique
  createdBy   String
  accessLevel String   @default("VIEW") // VIEW, COMMENT, EDIT
  password    String? // Hashed password
  expiresAt   DateTime?
  maxViews    Int?
  viewCount   Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  document Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  user     User     @relation(fields: [createdBy], references: [id], onDelete: Cascade)

  @@index([documentId])
  @@index([token])
  @@map("document_share_links")
}

model DocumentLink {
  id         String   @id @default(cuid())
  documentId String
  taskId     String
  createdAt  DateTime @default(now())

  document Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  task     Task     @relation(fields: [taskId], references: [id], onDelete: Cascade)

  @@unique([documentId, taskId])
  @@index([documentId])
  @@index([taskId])
  @@map("document_links")
}

model DocumentVector {
  id         String   @id @default(cuid())
  documentId String
  chunkIndex Int      @default(0)
  content    String // Text chunk
  vector     String // JSON string for embedding vector
  metadata   String? // JSON string for chunk metadata (section, page, etc.)
  createdAt  DateTime @default(now())

  document Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  @@index([documentId])
  @@index([chunkIndex])
  @@map("document_vectors")
}

model DocumentRedaction {
  id         String   @id @default(cuid())
  documentId String
  field      String? // Field name if field-level redaction
  position   String // JSON string for position/range
  reason     String? // Reason for redaction
  redactedBy String
  redactedAt DateTime @default(now())

  document Document @relation(fields: [documentId], references: [id], onDelete: Cascade)

  @@index([documentId])
  @@map("document_redactions")
}

// User's expanded/collapsed state for page tree (Confluence-style persistence)
model UserTreeState {
  id          String   @id @default(cuid())
  userId      String
  spaceId     String
  documentId  String
  isExpanded  Boolean  @default(true)
  updatedAt   DateTime @updatedAt

  @@unique([userId, documentId])
  @@index([userId, spaceId])
  @@map("user_tree_states")
}

// Recent pages viewed by user
model UserRecentPage {
  id          String   @id @default(cuid())
  userId      String
  documentId  String
  viewedAt    DateTime @default(now())

  @@unique([userId, documentId])
  @@index([userId])
  @@map("user_recent_pages")
}
